import{F as L,c as u,o as d,a as l,r as O,t as i,b as n,_ as f,d as N,e as W,f as b,u as e,w as m,g as $,h,i as j,j as V,k as x,M as C,l as U,m as D,p as F,q as y,s as B,v as M,x as S,y as H}from"./index-DI_G0BoI.js";import{a as o,W as I,f as T,t as a,b as P}from"./app-WwhSjxh8.js";import{_ as Q}from"./MyMenu-DLR71LC4.js";import{_ as Y}from"./MyMsgs-Db-2nxTl.js";import"./selection-RwR5yAin.js";const q={key:0,class:"row g10"},E={key:1},G={__name:"FireAuth",props:{fb:L,bio:Object},setup(k){return(v,c)=>{var _;return k.fb.user?(d(),u("div",q,[l("div",null,i(((_=k.bio)==null?void 0:_.name)||k.fb.user.name),1),O(v.$slots,"default")])):(d(),u("div",E,[n(f,{i:"person",onClick:c[0]||(c[0]=w=>k.fb.signIn())})]))}}},J={class:"page"},z={class:"row m5 gh10"},K={key:1,class:"f1 center m10 g10"},R={class:"txt1"},X={class:"txt2"},Z={class:"txt3 pre"},ee=["innerHTML"],se={class:"m5"},te={class:"row m5 g10 ctr"},oe={class:"row m5 g10"},le={class:"row m5 g5"},ne=["onClick"],ae={class:"f1 scroll"},ie={key:0,class:"row unset m10 g10"},de=["onClick"],ue={class:"row"},re={class:"txt3"},me={class:"row ctr"},fe={class:"row between m10"},ve={key:0},pe={key:1,class:"col g10"},ke={class:"row ctr"},ye={__name:"HomePage",setup(k){const v=N(!1);function c(){return U.sum(Object.values(o.chats2).filter(r=>!r.block).map(_))}function _(r){return o.bio.uid?r.msgs.filter(s=>!s.read&&s.uid!=o.bio.uid).length:0}function w(r){var s;return B((s=U.last(r.msgs.filter(t=>t.act!="D")))==null?void 0:s.body)}function A(r){return r.data.summary.includes("LOW_QUALITY")?r.data.msgs.map(s=>s.content).join(". "):r.data.summary}return(r,s)=>(d(),u("div",J,[l("div",z,[n(f,{i:"sort",onClick:s[0]||(s[0]=t=>e(o).readChats())}),n(f,{i:"email",onClick:s[1]||(s[1]=t=>e(o).showChats2=!0),badge:c()},null,8,["badge"]),n(f,{i:"support_agent",to:e(I)},null,8,["to"]),n(f,{i:"info",to:"/info"}),s[21]||(s[21]=l("div",{class:"f1"},null,-1)),(e(D),b("",!0)),s[22]||(s[22]=l("div",{class:"f1"},null,-1)),n(G,{fb:e(T),bio:e(o).bio},{default:m(()=>[n(f,{i:"edit",onClick:s[3]||(s[3]=t=>e(o).editBio())})]),_:1},8,["fb","bio"])]),e(o).msgs.length?(d(),W(Y,{key:0,msgs:e(o).getMsgsWithMenu()},{default:m(()=>[e(o).summary?(d(),u("div",{key:0,class:"row ctr txt4",onClick:s[4]||(s[4]=t=>e(o).showSummary=!0)},i(e(a).summary),1)):b("",!0)]),_:1},8,["msgs"])):(d(),u("div",K,[s[23]||(s[23]=l("img",{class:"logo",src:"/ui/icons/SM.png"},null,-1)),l("div",R,i(e(a).info),1),l("div",X,i(e(a).info2),1),l("div",Z,i(e(a).info3),1),l("div",null,i(e(a).discover)+":",1),(d(!0),u($,null,h(e(a).usages,(t,p)=>(d(),u("div",{key:p},i(t),1))),128)),n(j,{class:"m10",md:e(a).info4},null,8,["md"]),e(F)?(d(),u("div",{key:0,class:"m10",innerHTML:e(P)},null,8,ee)):b("",!0)])),l("div",se,[l("div",te,[n(V,{onClick:s[5]||(s[5]=t=>e(o).setChat({}))},{default:m(()=>[y(i(e(a).newChat),1)]),_:1}),n(V,{onClick:s[6]||(s[6]=t=>e(o).search())},{default:m(()=>[y(i(e(a).kindred),1)]),_:1})]),l("div",oe,[n(x,{modelValue:e(o).msg.body,"onUpdate:modelValue":s[7]||(s[7]=t=>e(o).msg.body=t),ph:e(a).editMsg},null,8,["modelValue","ph"]),n(f,{i:"north",onClick:s[8]||(s[8]=t=>e(o).send())})])]),n(C,{modelValue:e(o).showChats,"onUpdate:modelValue":s[9]||(s[9]=t=>e(o).showChats=t)},{default:m(()=>[(d(!0),u($,null,h(e(o).chats,t=>(d(),u("div",{key:t.id},[l("div",le,[l("div",{class:"f1",onClick:p=>e(o).setChat(t)},i(e(B)(A(t))),9,ne),n(f,{i:"delete",onClick:p=>e(o).delChat(t)},null,8,["onClick"])])]))),128))]),_:1},8,["modelValue"]),n(C,{modelValue:e(o).showChats2,"onUpdate:modelValue":s[11]||(s[11]=t=>e(o).showChats2=t)},{default:m(()=>[l("div",null,i(v.value?e(a).blocked:e(a).contacts),1),l("div",ae,[(d(!0),u($,null,h(e(o).chats2,(t,p)=>(d(),u("div",{key:p},[(v.value?t.block:!t.block)?(d(),u("div",ie,[n(M,{class:"avatar",modelValue:t.from.photo,"onUpdate:modelValue":g=>t.from.photo=g},null,8,["modelValue","onUpdate:modelValue"]),l("div",{class:"f1",onClick:g=>r.$router.push(`/chat?uid=${p}`)},[l("div",ue,[l("div",null,i(t.from.name),1),n(S,{modelValue:t.from.sex,"onUpdate:modelValue":g=>t.from.sex=g},null,8,["modelValue","onUpdate:modelValue"]),n(H,{class:"m5",v:_(t)},null,8,["v"])]),l("div",re,i(w(t)),1)],8,de),n(Q,{items:e(o).getChat2Menu(t)},null,8,["items"])])):b("",!0)]))),128))]),l("div",me,[l("div",{class:"txt4 m5",onClick:s[10]||(s[10]=t=>v.value=!v.value)},i(v.value?e(a).back:e(a).blocked),1)])]),_:1},8,["modelValue"]),n(C,{modelValue:e(o).showBio,"onUpdate:modelValue":s[18]||(s[18]=t=>e(o).showBio=t)},{default:m(()=>[n(M,{class:"photo",style:{width:"30%"},modelValue:e(o).bio.photo,"onUpdate:modelValue":s[12]||(s[12]=t=>e(o).bio.photo=t),edit:""},null,8,["modelValue"]),n(S,{modelValue:e(o).bio.sex,"onUpdate:modelValue":s[13]||(s[13]=t=>e(o).bio.sex=t),edit:""},null,8,["modelValue"]),n(x,{modelValue:e(o).bio.name,"onUpdate:modelValue":s[14]||(s[14]=t=>e(o).bio.name=t),ph:e(a).editName},null,8,["modelValue","ph"]),n(V,{onClick:s[15]||(s[15]=t=>e(o).updateBio())},{default:m(()=>[y(i(e(a).updateBio),1)]),_:1}),l("div",fe,[l("div",{onClick:s[16]||(s[16]=t=>e(o).delUser())},i(e(a).delAccount),1),l("div",{onClick:s[17]||(s[17]=t=>e(T).signOut())},i(e(a).signOut),1)])]),_:1},8,["modelValue"]),n(C,{modelValue:e(o).showSummary,"onUpdate:modelValue":s[20]||(s[20]=t=>e(o).showSummary=t)},{default:m(()=>{var t;return[(t=e(o).summary)!=null&&t.includes("LOW_QUALITY")?(d(),u("div",ve,i(e(a).lowQuality),1)):(d(),u("div",pe,[l("div",null,i(e(o).summary),1),l("div",ke,[n(V,{onClick:s[19]||(s[19]=p=>e(o)._cudChat2())},{default:m(()=>[y(i(e(a).reGen),1)]),_:1})])]))]}),_:1},8,["modelValue"])]))}};export{ye as default};
